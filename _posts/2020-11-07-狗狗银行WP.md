---
layout: post
title: 狗狗银行WP
catalog:  true
tags:
        - CTF
        - Hack
---

## 切入点

后端计算利息的近似方法为四舍五入，故构造合理余额可使得借记卡利息达到0.6%，高于信用卡的0.5%从而获取利润

## 解题方法

分析创建卡、转账的请求，使用burp的intruder批量发包，首先自行手动创建一张信用卡，再通过burp批量创建998张借记卡
（为了满足题目新增要求），再通过burp从信用卡向每一张新增的信用卡转账167元

吃饭后，此时，每张卡都会有理论0.501元的利息，经过后端计算舍入得1元利息，共获得998元利息，而信用卡欠款166666元，
利息833.33元，有164元差额。除去吃饭的10元仍有利润。重复几天就可以使净资产大于2000。

## 错误解题方法

看到题我的第一思路是整型溢出，于是借了很多钱，用burp请求/api/eat很多次，最后返回的欠款有2^1000不止。后端应该用
的BigDecimal，不会出现溢出。
